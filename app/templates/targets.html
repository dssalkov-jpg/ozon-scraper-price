{% extends "layout.html" %}
{% block content %}
<h2>üìã Targets (URLs –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞)</h2>

<div class="card">
  <h3>–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</h3>
  <form method="post" action="/targets/add">
    <div class="form-group">
      <label>URL —Ç–æ–≤–∞—Ä–∞ –Ω–∞ Ozon</label>
      <input name="url" placeholder="https://www.ozon.ru/product/..." required/>
    </div>
    <div class="form-group">
      <label>–ù–∞–∑–≤–∞–Ω–∏–µ (–¥–ª—è —Å–µ–±—è)</label>
      <input name="name" placeholder="–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç –ê - –¢–æ–≤–∞—Ä X"/>
    </div>
    <button type="submit">‚ûï –î–æ–±–∞–≤–∏—Ç—å</button>
  </form>
</div>

{% if targets %}
<table>
  <thead>
    <tr>
      <th style="width:50px">ID</th>
      <th style="width:60px">–ê–∫—Ç–∏–≤–µ–Ω</th>
      <th style="width:200px">–ù–∞–∑–≤–∞–Ω–∏–µ</th>
      <th>URL</th>
      <th style="width:180px">–î–µ–π—Å—Ç–≤–∏—è</th>
    </tr>
  </thead>
  <tbody>
    {% for t in targets %}
    <tr>
      <td>{{t.id}}</td>
      <td>{{ "‚úÖ" if t.enabled else "‚ùå" }}</td>
      <td>{{t.name or "‚Äî"}}</td>
      <td class="url-cell">
        <a href="{{t.url}}" target="_blank">{{t.url}}</a>
      </td>
      <td>
        <form method="post" action="/targets/toggle" style="display:inline">
          <input type="hidden" name="target_id" value="{{t.id}}"/>
          <button type="submit" class="btn-secondary" style="padding:6px 12px; font-size:12px">
            {{ "–í—ã–∫–ª" if t.enabled else "–í–∫–ª" }}
          </button>
        </form>
        <form method="post" action="/targets/delete" style="display:inline" 
              onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å?')">
          <input type="hidden" name="target_id" value="{{t.id}}"/>
          <button type="submit" class="btn-danger" style="padding:6px 12px; font-size:12px">
            üóë
          </button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<div class="card muted">–ù–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤</div>
{% endif %}
{% endblock %}
